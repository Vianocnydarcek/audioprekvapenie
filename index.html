<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Je≈æi≈°kov Robo-kamar√°t</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --dog-color: #bdc3c7;
            --dog-dark: #95a5a6;
            --accent: #3498db;
            --gold: #f1c40f;
        }

        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background: radial-gradient(circle, #2c3e50, #000);
            color: white; margin: 0; padding: 15px;
            display: flex; flex-direction: column; align-items: center; min-height: 100vh;
        }

        .app-container {
            background: rgba(255, 255, 255, 0.95); border-radius: 40px;
            max-width: 500px; width: 100%; padding: 30px; color: #333;
            box-shadow: 0 0 50px rgba(52, 152, 219, 0.5); text-align: center; margin-top: 20px;
        }

        /* --- KOMPLEXN√ù CSS ROBO-PES --- */
        .dog-wrapper { height: 220px; position: relative; width: 200px; margin: 0 auto; }
        .dog-body { 
            width: 120px; height: 90px; background: var(--dog-color); 
            border-radius: 40px; position: absolute; bottom: 30px; left: 40px;
            border: 3px solid var(--dog-dark);
        }
        .dog-head {
            width: 90px; height: 80px; background: var(--dog-color);
            border-radius: 30px; position: absolute; top: 20px; right: 20px;
            border: 3px solid var(--dog-dark); z-index: 5;
        }
        .ear {
            width: 30px; height: 50px; background: var(--dog-dark);
            position: absolute; border-radius: 10px; top: -10px;
        }
        .ear.left { left: 5px; transform: rotate(-10deg); }
        .ear.right { right: 5px; transform: rotate(10deg); }
        .snout {
            width: 40px; height: 30px; background: #eee; border-radius: 15px;
            position: absolute; bottom: 10px; left: 25px;
        }
        .nose { width: 12px; height: 8px; background: #333; border-radius: 50%; margin: 5px auto; }
        .eye { 
            width: 14px; height: 14px; background: #222; border-radius: 50%;
            position: absolute; top: 25px; border: 2px solid var(--accent);
            box-shadow: 0 0 5px var(--accent); animation: blink 4s infinite;
        }
        .eye.l { left: 15px; } .eye.r { right: 15px; }
        .tail {
            width: 40px; height: 10px; background: var(--dog-dark);
            position: absolute; left: 10px; bottom: 80px; border-radius: 10px;
            transform-origin: right; animation: wag 0.5s infinite alternate;
        }
        .collar {
            width: 96px; height: 10px; background: #e74c3c;
            position: absolute; bottom: 10px; left: -3px; border-radius: 5px;
        }

        @keyframes wag { from { transform: rotate(20deg); } to { transform: rotate(60deg); } }
        @keyframes blink { 0%, 90%, 100% { transform: scaleY(1); } 95% { transform: scaleY(0.1); } }

        /* --- UI PRVKY --- */
        .speech-bubble {
            background: #f1f2f6; border-radius: 20px; padding: 15px;
            margin: 20px 0; font-weight: bold; position: relative; border: 2px solid #ddd;
        }
        .status-container { margin: 15px 0; display: none; }
        .progress-bg { background: #eee; height: 20px; border-radius: 10px; overflow: hidden; }
        .progress-fill { 
            background: linear-gradient(90deg, #2ecc71, #27ae60); 
            width: 0%; height: 100%; transition: width 0.4s; 
        }

        .btn {
            background: var(--accent); color: white; border: none; padding: 12px 20px;
            border-radius: 25px; cursor: pointer; font-weight: bold; margin: 5px; transition: 0.2s;
        }
        .btn:hover { transform: scale(1.1); background: #2980b9; }
        .btn-play { background: #9b59b6; display: none; }

        .book-card {
            background: white; border: 2px solid #eee; border-radius: 20px;
            padding: 15px; margin: 10px 0; display: none; cursor: pointer;
            transition: 0.3s; text-align: left; align-items: center;
        }
        .book-card:hover { border-color: var(--gold); background: #fffdf0; }
        
        #voucher-section { display: none; background: #fff9c4; border: 3px dashed var(--gold); padding: 20px; border-radius: 20px; }
    </style>
</head>
<body>

    <div class="app-container">
        <div class="dog-wrapper" id="dog-box">
            <div class="tail"></div>
            <div class="dog-body"></div>
            <div class="dog-head">
                <div class="ear left"></div>
                <div class="ear right"></div>
                <div class="eye l"></div>
                <div class="eye r"></div>
                <div class="snout"><div class="nose"></div></div>
                <div class="collar"></div>
            </div>
        </div>

        <div class="speech-bubble" id="dialogue">Naƒç√≠tavam vianoƒçn√Ω syst√©m...</div>

        <div id="phase-name">
            <input type="text" id="dog-name-input" placeholder="Daj mi meno..." style="padding:10px; border-radius:15px; border:1px solid #ccc; width:70%;">
            <button class="btn" onclick="nameDog()">To je tvoje meno!</button>
        </div>

        <div id="phase-play" class="status-container">
            <div class="progress-bg"><div id="happy-bar" class="progress-fill"></div></div>
            <div style="margin-top:10px;">
                <button class="btn btn-play" id="btn-pet" onclick="play(10, 'Oooo, to je super!')">üñêÔ∏è Pohladka≈•</button>
                <button class="btn btn-play" id="btn-paw" onclick="play(15, 'Tu je moja labka!')">üêæ Da≈• labku</button>
                <button class="btn btn-play" id="btn-scratch" onclick="play(20, 'Tooo mi ch√Ωbalo! Hav!')">ü¶¥ Po≈°krabka≈•</button>
            </div>
        </div>

        <div id="phase-intro-tips" style="display:none;">
            <button class="btn" onclick="startTour()">√Åno, uk√°≈æ mi ich!</button>
        </div>

        <div id="phase-books">
            <div class="book-card" onclick="bookTalk(1)">üèùÔ∏è <strong>Spr√°vna pƒõtka</strong></div>
            <div class="book-card" onclick="bookTalk(2)">üêï <strong>O chlapcovi, ktor√Ω rozumel psom</strong></div>
            <div class="book-card" onclick="bookTalk(3)">üöÄ <strong>Robopes</strong></div>
            <button class="btn" id="btn-reveal" style="display:none; background:var(--gold); color:black;" onclick="showFinal()">üéÅ CHCEM SVOJ DARƒåEK</button>
        </div>

        <div id="voucher-section">
            <h3>üéÑ Je≈æi≈°kov k√≥d pre Zoe üéÑ</h3>
            <p style="font-size: 24px; font-weight: bold; letter-spacing: 2px;">EECHPLKMKBHH</p>
            <a href="https://www.audiolibrix.com/sk/User/Register?returnUrl=%2Fsk" target="_blank" style="text-decoration:none;">
                <button class="btn" style="width:100%; background:#e74c3c;">ZAREGISTROVA≈§ SA</button>
            </a>
        </div>
    </div>

    <script>
        let happiness = 0;
        let dogName = "";
        const nameZoe = "Zoe";

        function speak(text) {
            window.speechSynthesis.cancel();
            const msg = new SpeechSynthesisUtterance(text);
            msg.lang = 'sk-SK';
            msg.pitch = 1.3;
            document.getElementById('dialogue').innerText = text;
            window.speechSynthesis.speak(msg);
        }

        function nameDog() {
            const input = document.getElementById('dog-name-input').value;
            if(!input) return;
            dogName = input;
            document.getElementById('phase-name').style.display = 'none';
            document.getElementById('phase-play').style.display = 'block';
            document.querySelectorAll('.btn-play').forEach(b => b.style.display = 'inline-block');
            
            speak("Ahoj " + nameZoe + "! Tak≈æe ja som " + dogName + ". Je≈æi≈°ko mi povedal, ≈æe si veƒæmi ≈°ikovn√°. Ale som po tej ceste trochu smutn√Ω... pohr√°≈° sa so mnou?");
        }

        function play(amt, txt) {
            happiness += amt;
            if(happiness > 100) happiness = 100;
            document.getElementById('happy-bar').style.width = happiness + "%";
            
            if(happiness >= 100) {
                speak("Vau! C√≠tim sa √∫≈æasne! Vie≈° ƒço, " + nameZoe + "? Je≈æi≈°ko mi pre teba nieƒço dal. Chce≈°, aby som ti uk√°zal, ako si vybra≈• super pr√≠beh na poƒç√∫vanie?");
                document.querySelectorAll('.btn-play').forEach(b => b.style.display = 'none');
                document.getElementById('phase-intro-tips').style.display = 'block';
            } else {
                speak(txt);
            }
        }

        function startTour() {
            document.getElementById('phase-intro-tips').style.display = 'none';
            document.querySelectorAll('.book-card').forEach(b => b.style.display = 'flex');
            speak("Pozri, v tomto tablete si m√¥≈æe≈° vypoƒçu≈• tieto rozpr√°vky. Klikni na jednu a ja ti o nej nieƒço poviem!");
        }

        function bookTalk(id) {
            confetti({ particleCount: 30, spread: 50 });
            if(id === 1) speak("Spr√°vna pƒõtka! To je o partii det√≠ a jednom super psovi menom Tim. Budete hƒæada≈• poklad na ostrove!");
            if(id === 2) speak("Tento chlapec rozumie psom √∫plne tak ako ty mne. Je to kr√°sny pr√≠beh o priateƒæstve.");
            if(id === 3) speak("Robopes! To je o mojom kamo≈°ovi, ktor√Ω je cel√Ω zo ≈æeleza a za≈æ√≠va bl√°zniv√© veci.");
            
            document.getElementById('btn-reveal').style.display = 'block';
        }

        function showFinal() {
            document.getElementById('phase-books').style.display = 'none';
            document.getElementById('voucher-section').style.display = 'block';
            speak("Tu je tvoj vianoƒçn√Ω k√≥d a odkaz do kni≈ænice. U≈æ√≠vaj si pr√≠behy, Zoe! ≈†≈•astn√© a vesel√©!");
            
            var end = Date.now() + (5 * 1000);
            (function frame() {
                confetti({ particleCount: 3, angle: 60, spread: 55, origin: { x: 0 } });
                confetti({ particleCount: 3, angle: 120, spread: 55, origin: { x: 1 } });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());
        }

        window.onload = () => {
            setTimeout(() => {
                speak("Ahoj Zoe! Je≈æi≈°ko ma poslal za tebou. ƒå√≠tal tvoj list! Len mi e≈°te mus√≠≈° da≈• meno...");
            }, 1000);
        };
    </script>
</body>
</html>
